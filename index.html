<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="userName" content="contentName">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<title>乃木坂46の名前を覚えるツール</title>
	<link rel="stylesheet" href="css/index.css" media="all">
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</head>
<body>
	<div class="contents">
		<h1>乃木坂46の名前を覚えるツール</h1>
		<h2 class="mode">モード(全員)</h2>
		<div class="control-panel">
			<div class="buttons">
				<button class="next">次へ</button>
				<button class="display">名前を表示</button><br><br>
			</div>
			<div class="setting">
				<p>モード変更</p>
				<select name="modelist" class="modelist">
					<option value="1人目〜15人目">1人目〜15人目</option>
					<option value="16人目〜31人目">16人目〜31人目</option>
					<option value="31人目〜46人目">31人目〜46人目</option>
					<option value="全員" selected="selected">全員</option>
				</select><br>
				<button class="selectok">決定</button><br>
			</div>
		</div>
		<div class="result-panel">
			<img class="face" src="" width="290" height="350"><br>
			<p class="name"></p>
		</div>
	</div>
	<script>
	// htmlを読み込んでから処理を実行する
	$(function(){
		// 人物の配列を与えると、その中からランダムで１つ選る。
		// その後、html上に人物画像を表示してくれる関数
		var randomPerson = function(nogizaka46){
			// 現在のnogizaka46配列をもとにランダムインデックスを作成する
			length = nogizaka46.length;
			var randomIndex = Math.floor(Math.random()*length);
			// randomIndexが前回のものと被らなくなるまでループ
			var randomIndex = 0;
			while(true){
				randomIndex = Math.floor(Math.random()*length);
				if(randomIndex!==targetIndex) break;
			}
			targetIndex = randomIndex;
			// インデックスに当たる画像を表示
			var obj = nogizaka46[randomIndex];
			var imageUrl = "img/" + obj.image
			$("img.face").attr("src",imageUrl);
			$("p.name").html(""); // 前回の名前を削除
		}
		// phpではフォルダ以下のファイル名を取得できるようだが、
		// javascriptではそれはできなさそうな感じだった
		// javascriptで連想配列
		var source = [
		{name:"秋元真夏",image:"akimotomanatsu_prof.jpg"},
		{name:"生田絵梨花",image:"ikutaerika_prof.jpg"},
		{name:"生駒里奈",image:"ikomarina_prof.jpg"},
		{name:"伊藤かりん",image:"itoukarin_prof.jpg"},
		{name:"伊藤純奈",image:"itoujunna_prof.jpg"},
		{name:"伊藤万理華",image:"itoumarika_prof.jpg"},
		{name:"井上小百合",image:"inouesayuri_prof.jpg"},
		{name:"衛藤美彩",image:"etoumisa_prof.jpg"},
		{name:"川後陽菜",image:"kawagohina_prof.jpg"},
		{name:"川村真洋",image:"kawamuramahiro_prof.jpg"},
		{name:"北野日奈子",image:"kitanohinako_prof.jpg"},
		{name:"齋藤飛鳥",image:"saitouasuka_prof.jpg"},
		{name:"斎藤ちはる",image:"saitouchiharu_prof.jpg"},
		{name:"斉藤優里",image:"saitouyuuri_prof.jpg"},
		{name:"相楽伊織",image:"sagaraiori_prof.jpg"},
		{name:"樋口日奈",image:"higuchihina_prof.jpg"},
		{name:"堀未央奈",image:"horimiona_prof.jpg"},
		{name:"星野みなみ",image:"hoshinominami_prof.jpg"},
		{name:"松村沙友理",image:"matsumurasayuri_prof.jpg"},
		{name:"中田花奈",image:"nakadakana_prof.jpg"},
		{name:"中元日芽香",image:"nakamotohimeka_prof.jpg"},
		{name:"西野七瀬",image:"nishinonanase_prof.jpg"},
		{name:"能條愛未",image:"noujouami_prof.jpg"},
		{name:"桜井玲香",image:"sakuraireika_prof.jpg"},
		{name:"佐々木琴子",image:"sasakikotoko_prof.jpg"},
		{name:"新内眞衣",image:"shinuchimai_prof.jpg"},
		{name:"白石麻衣",image:"shiraishimai_prof.jpg"},
		{name:"鈴木絢音",image:"suzukiayane_prof.jpg"},
		{name:"高山一実",image:"takayamakazumi_prof.jpg"},
		{name:"寺田蘭世",image:"teradaranze_prof.jpg"},
		{name:"伊藤理々杏",image:"itouriria_prof.jpg"},
		{name:"岩本蓮加",image:"iwamotorenka_prof.jpg"},
		{name:"久保史緒里",image:"kuboshiori_prof.jpg"},
		{name:"向井葉月",image:"mukaihazuki_prof.jpg"},
		{name:"中村麗乃",image:"nakamurareno_prof.jpg"},
		{name:"大園桃子",image:"oozonomomoko_prof.jpg"},
		{name:"坂口珠美",image:"sakaguchitamami_prof.jpg"},
		{name:"佐藤楓",image:"satoukaede_prof.jpg"},
		{name:"梅澤美波",image:"umezawaminami_prof.jpg"},
		{name:"和田まあや",image:"wadamaaya_prof.jpg"},
		{name:"若月佑美",image:"wakatsukiyumi_prof.jpg"},
		{name:"渡辺みり愛",image:"watanabemiria_prof.jpg"},
		{name:"山下美月",image:"yamashitamizuki_prof.jpg"},
		{name:"山崎伶奈",image:"yamazakirena_prof.jpg"},
		{name:"与田祐希",image:"yodayuuki_prof.jpg"},
		{name:"吉田綾乃クリスティー",image:"yoshidaayanochristie_prof.jpg"},
		]
		var nogizaka46 = source;
		var targetIndex = 0;

		randomPerson(nogizaka46);

		// buttonタグのうちnextクラスのものがクリックされたら
		$("button.next").click(function(e){
			randomPerson(nogizaka46);
		});
		 // buttonタグのうちdisplayクラスのものがクリックされたら
		 $("button.display").click(function(e){
		 	// インデックスに当たる名前を表示
		 	var obj = nogizaka46[targetIndex]; 
		 	$("p.name").html(obj.name);
		 });
		 // buttonタグのうちselectokクラスのものがクリックされたら
		 $("button.selectok").click(function(e){
		 	var selected = $("select.modelist").val();
		 	var text = "モード(" + selected + ")";
		 	$("h2.mode").html(text);
		 	// array.slice(A,B)は、A以上B未満を切り取る
		 	if(selected==="1人目〜15人目") nogizaka46 = source.slice(0,16);
		 	else if(selected==="16人目〜31人目") nogizaka46 = source.slice(16,32);
		 	else if(selected==="31人目〜46人目") nogizaka46 = source.slice(32,47);
		 	else if(selected==="全員") nogizaka46 = source;
		 });
		});
	</script>
</body>
</html>